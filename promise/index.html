<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Promise</title>
</head>
<style>
	.ball{
		width: 60px;
		height: 60px;
		border-radius: 100%;
		margin-bottom: 10px;
	}
	.ball1{
		background-color: red;
	}
	.ball2{
		background-color: yellow;
	}
	.ball3{
		background-color: blue;
	}
</style>
<body>
	<div class="ball ball1"  style="margin-left:0px;"></div>
	<div class="ball ball2" style="margin-left:0px;"></div>
	<div class="ball ball3" style="margin-left:0px;"></div>
</body>
<script type="text/javascript">
	var ball1 = document.querySelector(".ball1");
	var ball2 = document.querySelector(".ball2");
	var ball3 = document.querySelector(".ball3");
	function animate(ball,distance,callback){
		setTimeout(function(){
			var marginLeft = parseInt(ball.style.marginLeft,10);
			if(marginLeft == distance){
				callback && callback() /*是为了判断callback是否存在，不然直接写callback()*/
			}else{
				if(marginLeft < distance){
					marginLeft++
				}else{
					marginLeft--
				}
				ball.style.marginLeft = marginLeft + 'px';
				animate(ball,distance,callback)
			}
		}, 13)
	}
	animate(ball1,100,function(){
		animate(ball2,200,function(){
			animate(ball3,300,function(){
				animate(ball3,150,function(){
					animate(ball2,150,function(){
						animate(ball1,150,function(){

						})
					})
				})
			})
		})
	})
</script>
</html>